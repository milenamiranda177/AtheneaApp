<div class="container">
 <form [formGroup]="contactForm">
  <div class="row space-rows">
    <div class="col-md">
      <label>{{'ADMIN_ACCOUNT.NAME'|translate}}</label>
      <input class="form-control form-control-sm" name="contactadm_name" [(ngModel)]="contactadm_name" formControlName="contactadm_name" type="text" size="30" maxlength="50" required>
    </div>
    <div class="col-md">
        <label>{{'ADMIN_ACCOUNT.EMAIL'|translate}}</label>
        <input class="form-control form-control-sm" name="contactadm_email" [(ngModel)]="contactadm_email" formControlName="contactadm_email" (ngModelChange)="toLower()" type="email" size="30" maxlength="50" [email]="true" required>
    </div>
  </div>

  <div class="row space-rows">
  <div class="col-md">
      <label>{{'ADMIN_ACCOUNT.CODE_AREA'|translate}}</label>
      <input class="form-control form-control-sm" name="contactadm_areacode" [(ngModel)]="contactadm_areacode" formControlName="contactadm_areacode" (ngModelChange)="validateLenght('contactadm_areacode',3)" type="number" size="3" min="1" pattern="^[0-9]+" required>
    </div>
    <div class="col-md">
      <label>{{'ADMIN_ACCOUNT.TELEPHONE_LABEL'|translate}}</label>
      <input class="form-control form-control-sm" name="contactadm_telephone" [(ngModel)]="contactadm_telephone" formControlName="contactadm_telephone" (ngModelChange)="validateLenght('contactadm_telephone',11)" type="number" size="30" min="1" pattern="^[0-9]+" required>
    </div>
    <div class="col-md">
      <label>{{'ADMIN_ACCOUNT.CELPHONE_LABEL'|translate}}</label>
      <input class="form-control form-control-sm" name="contactadm_celphone" [(ngModel)]="contactadm_celphone" formControlName="contactadm_celphone" (ngModelChange)="validateLenght('contactadm_celphone',15)" type="number" size="30" min="1" pattern="^[0-9]+" required>
    </div>
  </div>
</form>
  <div class="row space-rows">
    <!--<div classs="col-lg-2">
        <label class="checkbox-inline"><input name="contactadm_occurrence" [(ngModel)]="contactadm_occurrence" type="checkbox" value="1">{{'ADMIN_ACCOUNT.OCURRENCE_LABEL'|translate}}</label>
     </div>-->
    
    <div class="col-md">
      <button pButton type="submit" class="ui-button-secondary" label="{{'ADMIN_ACCOUNT.SAVE_BUTTON'|translate}}" (click)="actionContact(pkCopeId,pkMapeId)" [disabled]="!contactForm.valid || loading"></button>
    </div>
  </div>
  <p-progressBar mode="indeterminate" *ngIf='loading' [style]="{'margin-top':'20px', 'margin-bottom':'20px', 'height': '6px'}" ></p-progressBar>
  <div class="row space-rows">
    <p-table [resizableColumns]="true" [value]="filteredList">
        <ng-template pTemplate="caption">
            <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
            <input type="text" pInputText size="50" maxlength="35" placeholder="{{'ADMIN_ACCOUNT.BUTTON_SEARCH'|translate}}" [(ngModel)]="filterText" (ngModelChange)="filter()" style="width:auto">
            <p style="position:absolute; top:10px; right: 50px; color:#333; font-weight: 500">Ayuda</p><i style="background-color:#0470B0!important;" class="fas fa-info help-tip">
                <p>
                    <i class="fas fa-times"></i> &nbsp;&nbsp;Eliminar Contacto
                    <br>
                    <br>
                    <i class="fas fa-pencil-alt"></i> &nbsp;Actualizar Contacto
                </p>
                </i>        
          </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="word-wrap: break-word; text-align:center;" [pSortableColumn]="col.field" *ngFor="let col of cols">
                    {{col.header|translate}}
                    <p-sortIcon [field]="col.field"></p-sortIcon>
                </th>
                <th style="word-wrap: break-word; text-align:center;width: 170px">{{'ADMIN_ACCOUNT.ACTION_TABLE'|translate}}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
            <tr>
                <td style="word-wrap: break-word" *ngFor="let col of cols">
                    {{data[col.field]|translate}}
            </td>
                <td>
                  <div style="display: flex; justify-content: center;"  class="mx-auto">
                  <button  pButton type="button" icon="fas fa-times" style=" margin-right:3%;"  class="btn ui-button-danger btn-enable" (click)="bindinDelete(data.pkCopeId)" data-toggle="modal" data-target="#ContactModal"></button>
                  <button  pButton type="button" icon="fas fa-pencil-alt" style=" margin-right:3%;"  class="btn ui-button-secondary btn-disable"  (click)="showContact(data)"></button>
                  </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
  </div>
    <!-- Modal de confirmación ON-->
    <div class="modal fade" id="ContactModal" tabindex="-1" role="dialog" aria-labelledby="ContactModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ContactModalLabel">{{'ADMIN_ACCOUNT.DEL_MSSG_CONT1'|translate}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                {{'ADMIN_ACCOUNT.DEL_MSSG_CONT2'|translate}}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-block btn-lg ui-button-secondary btn-disable" style="padding-bottom: 0;padding-top: 0;margin-top: 1%;max-width: 130px;font-size: 14px!important" data-dismiss="modal">{{'ADMIN_ACCOUNT.CANCEL'|translate}}</button>
                <button type="button" class="btn btn-block btn-lg ui-button-danger btn-enable" style="padding-bottom: 0;padding-top: 0;margin-top: 1%;max-width: 130px;color: white;font-size: 14px!important" data-dismiss="modal" (click)="deleteContact(tempId)">{{'ADMIN_ACCOUNT.ACCEPT'|translate}}</button>
            </div>
            </div>
        </div>
        <p-toast position="bottom-center"></p-toast>
    </div>
    <!-- Modal de confirmación OFF-->
</div>
<p-toast position="bottom-center"></p-toast>